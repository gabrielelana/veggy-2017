webpackJsonp([0],{116:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=null;return e.onCancelClick&&(t=i.default.createElement("a",{className:"button",onClick:e.onCancelClick},e.cancelBtnLabel)),i.default.createElement("div",{className:"modal "+(e.isActive?"is-active":"")},i.default.createElement("div",{className:"modal-background"}),i.default.createElement("div",{className:"modal-card"},i.default.createElement("header",{className:"modal-card-head"},i.default.createElement("p",{className:"modal-card-title"},e.title)),i.default.createElement("section",{className:"modal-card-body"},e.children),i.default.createElement("footer",{className:"modal-card-foot"},i.default.createElement("a",{className:"button is-success",onClick:e.onOkClick},e.okBtnLabel),t,i.default.createElement(o,{show:e.waiting}))))}function o(e){return e.show?i.default.createElement("div",{className:"waiting"},i.default.createElement("svg",{width:"34px",height:"34px",preserveAspectRatio:"xMidYMid",className:"uil-ripple"},i.default.createElement("g",null,i.default.createElement("animate",{attributeName:"opacity",dur:"2s",repeatCount:"indefinite",begin:"0s",keyTimes:"0;0.33;1",values:"1;1;0"}),i.default.createElement("circle",{cx:"20",cy:"20",r:"24",stroke:"#1fc8db",fill:"none",strokeWidth:"2",strokeLinecap:"round"},i.default.createElement("animate",{attributeName:"r",dur:"2s",repeatCount:"indefinite",begin:"0s",keyTimes:"0;0.33;1",values:"0;8;16"}))),i.default.createElement("g",null,i.default.createElement("animate",{attributeName:"opacity",dur:"2s",repeatCount:"indefinite",begin:"1s",keyTimes:"0;0.33;1",values:"1;1;0"}),i.default.createElement("circle",{cx:"20",cy:"20",r:"8",stroke:"#ed6c63",fill:"none",strokeWidth:"2",strokeLinecap:"round"},i.default.createElement("animate",{attributeName:"r",dur:"2s",repeatCount:"indefinite",begin:"1s",keyTimes:"0;0.33;1",values:"0;8;16"}))))):null}Object.defineProperty(t,"__esModule",{value:!0});var u=n(11),i=r(u),l=n(79),s=r(l);a.defaultProps={cancelBtnLabel:"Cancel",okBtnLabel:"Ok",title:"",isActive:!1,waiting:!1},a.propTypes={onOkClick:s.default.func.isRequired},t.default=a,e.exports=t.default},117:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApiError="ApiError",t.CommandFailed="CommandFailed",t.DismissMessage="DismissMessage",t.WaitForLogin="WaitForLogin"},118:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){return l.default.get(f.default.host+"/projections/latest-pomodori").then(function(e){m.default.dispatch({type:_.UsersLoaded,payload:e.body})}).catch(function(e){return m.default.dispatch({type:_.ApiError,payload:e})})}function o(e){var t=(0,d.default)().format("YYYY-MM-DD");return l.default.get(f.default.host+"/projections/pomodori-of-the-day?day="+t+"&timer_id="+e.timer_id).then(function(e){m.default.dispatch({type:_.TimersLoaded,payload:e.body})}).catch(function(e){return m.default.dispatch({type:_.ApiError,payload:e})})}function u(e){var t=(0,d.default)().format("YYYY-MM-DD");return l.default.get(f.default.host+"/projections/tags-of-the-day?day="+t+"&timer_id="+e.timer_id).then(function(e){m.default.dispatch({type:_.TagsLoaded,payload:e.body})}).catch(function(e){return m.default.dispatch({type:_.ApiError,payload:e})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getUsers=a,t.getTimers=o,t.getTags=u;var i=n(57),l=r(i),s=n(0),d=r(s),c=n(27),f=r(c),p=n(19),m=r(p),h=n(12),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(h)},119:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(19),o=r(a),u=n(331),i=r(u),l=n(12),s=null,d={start:function(e){var t=e;s=setInterval(function(){t=(0,i.default)(t),o.default.dispatch({type:l.UpdateTimer,payload:{time:t}})},1e3)},stop:function(){clearInterval(s),s=null}};t.default=d,e.exports=t.default},12:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(117);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}),t.PomodoroStarted="PomodoroStarted",t.PomodoroCompleted="PomodoroCompleted",t.PomodoroSquashed="PomodoroSquashed",t.PomodoroVoided="PomodoroVoided",t.LoggedIn="LoggedIn",t.ResumeTimer="ResumeTimer",t.UpdateTimer="UpdateTimer",t.NeedLogin="NeedLogin",t.StartRequested="StartRequested",t.StartCanceled="StartCanceled",t.Init="Init",t.TimersLoaded="TimersLoaded",t.UsersLoaded="UsersLoaded",t.TagsLoaded="TagsLoaded",t.SelectedUsersChanged="SelectedUsersChanged"},120:function(e,t,n){"use strict";function r(e){var t=e.toString(),n="00";return n.substring(0,n.length-t.length)+t}function a(e){var t=u.default.duration(e,"ms");return r(t.minutes())+":"+r(t.seconds())}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(o);e.exports=t.default},121:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t={username:e.username,timer_id:e.timer_id,user_id:e.user_id};switch(e.event){case f.PomodoroStarted:u.default.start(d.default.duration);break;case f.PomodoroCompleted:case f.PomodoroSquashed:case f.PomodoroVoided:u.default.stop();break;case f.LoggedIn:window.localStorage.setItem("veggy",JSON.stringify(t)),Promise.all([(0,p.getUsers)(),(0,p.getTimers)(t),(0,p.getTags)(t)]).then(function(){return l.default.dispatch({type:f.Init,payload:t})})}return{type:e.event,payload:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(119),u=r(o),i=n(19),l=r(i),s=n(27),d=r(s),c=n(12),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),p=n(118);t.default=a,e.exports=t.default},122:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){navigator.onLine&&!(0,_.isTicking)()?s.default.post(c.default.host+"/commands").set("Content-Type","application/json").send(e).end(function(e,n){e&&g.default.dispatch({type:v.default.ApiError,payload:e}),"function"==typeof t&&t(e,n)}):o(e)}function o(e){"StartPomodoro"===e.command&&(e.started_at=new Date,e.pomodoro_id="pomodoro_"+O.length,O.push(e),(0,_.startOffLinePomodoro)(e)),"SquashPomodoro"===e.command&&(e.squashed_at=new Date,e.pomodoro_id="pomodoro_"+(O.length-1),O.push(e),(0,_.squashOffLinePomodoro)(e,O.length))}function u(){(0,_.isTicking)()?setTimeout(u,5e3):i()}function i(){O.filter(function(e){return"StartPomodoro"===e.command}).forEach(function(e){var t=p.default.find(function(t){return"SquashPomodoro"===t.command&&t.pomodoro_id===e.pomodoro_id})(O);if(t)a({command:"TrackPomodoroSquashed",timer_id:t.timer_id,started_at:e.started_at,squashed_at:t.squashed_at});else{var n=(0,h.default)(e.started_at).add(c.default.duration,"ms");a({command:"TrackPomodoroCompleted",timer_id:e.timer_id,started_at:e.started_at,completed_at:n})}}),O.length=0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var l=n(57),s=r(l),d=n(27),c=r(d),f=n(44),p=r(f),m=n(0),h=r(m),_=n(351),y=n(12),v=r(y),b=n(19),g=r(b),O=[];window.addEventListener("online",u),e.exports=t.default},19:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=new Map,a={register:function(e){var t="s_"+(r.size+1);return r.set(t,e),t},unregister:function(e){r.delete(e)},dispatch:function(e){r.forEach(function(t){return t(e)})}};t.default=a,e.exports=t.default},27:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={host:"http://sleepy-ravine-60622.herokuapp.com",wsHost:"ws://sleepy-ravine-60622.herokuapp.com/ws",duration:15e5};t.default=r,e.exports=t.default},32:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return e.project=t,e},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};if("function"==typeof e)return r(e,t);var n=function(t,n){return n.type in e?e[n.type](t,n):t};return n.project=t,n};t.default=a,e.exports=t.default},323:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(339),o=r(a),u=n(345),i=r(u),l=n(352),s=r(l),d=n(330),c=r(d),f=(0,s.default)(o.default,i.default,c.default);t.default=f,e.exports=t.default},325:function(e,t){},327:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(11),o=r(a),u=n(80),i=r(u),l=n(78),s=r(l),d=n(323),c=r(d);n(325),s.default.connect(),i.default.render(o.default.createElement(c.default,null),document.getElementById("app"))},328:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return _[e]}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(11),d=r(s),c=n(79),f=r(c),p=n(19),m=r(p),h=n(117),_={info:"notification is-success",error:"notification is-danger",warn:"notification is-warning"},y=function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={show:!1},e}return u(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.message.length>0&&(this.setState({show:!0}),setTimeout(function(){m.default.dispatch({type:h.DismissMessage,payload:{}}),t.setState({show:!1})},this.props.timeout))}},{key:"render",value:function(){var e={display:"none"};this.state.show&&(e.display="block");var t=i(this.props.type);return d.default.createElement("div",{id:"messageBox",className:"column is-half is-offset-one-quarter is-gapless"},d.default.createElement("div",{className:t,style:e},this.props.message))}}]),t}(d.default.Component);y.defaultProps={timeout:4e3},y.propTypes={message:f.default.string.isRequired},t.default=y,e.exports=t.default},329:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(11),l=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(e){function t(){r(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={connectionStatusClass:"fa fa-link"},e.setOnline=e.setOnline.bind(e),e.setOffline=e.setOffline.bind(e),e}return o(t,e),u(t,[{key:"componentDidMount",value:function(){window.addEventListener("offline",this.setOffline),window.addEventListener("online",this.setOnline)}},{key:"componentWillUnmount",value:function(){window.removeEventListener(this.setOnline),window.removeEventListener(this.setOffline)}},{key:"setOnline",value:function(){this.setState({connectionStatusClass:"fa fa-link"})}},{key:"setOffline",value:function(){this.setState({connectionStatusClass:"fa fa-chain-broken"})}},{key:"render",value:function(){return l.default.createElement("nav",{className:"nav"},l.default.createElement("div",{className:"nav-left"},l.default.createElement("a",{className:"nav-item",href:"#"},l.default.createElement("h2",{className:"title is-2"},"Veggy"))),l.default.createElement("div",{className:"nav-right nav-menu"},l.default.createElement("a",{className:"nav-item",href:"#"},l.default.createElement("span",{className:"icon"},l.default.createElement("i",{className:this.state.connectionStatusClass}))),l.default.createElement("a",{className:"nav-item",href:"#"},l.default.createElement("span",{className:"icon"},l.default.createElement("i",{className:"fa fa-user"})),this.props.username)))}}]),t}(l.default.Component);t.default=s,e.exports=t.default},330:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(27),o=r(a),u=n(120),i=r(u),l={user_id:"",username:"",is_shared:!1,start_disabled:!1,squash_disabled:!0,time:(0,i.default)(o.default.duration),timer_id:null,pomodoro_id:null,message:"",message_type:"info",timers:[],users:[],tags:[],need_login:!1,need_description:!1,waiting_for_login:!1};t.default=l,e.exports=t.default},331:function(e,t,n){"use strict";function r(e){return o.default.duration(e).subtract(1,"seconds").asMilliseconds()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(a);e.exports=t.default},332:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=(0,s.default)(e);return c.default.duration-(0,s.default)().diff(t)}function o(e){return i.default.get(c.default.host+"/projections/latest-pomodoro?timer_id="+e.timer_id).then(function(e){if("started"===e.body.status){var t=a(e.body.started_at);y.default.start(t),p.default.dispatch({type:b.ResumeTimer,payload:{time:t,timer_id:e.body.timer_id,pomodoro_id:e.body.pomodoro_id}})}}).catch(function(e){404!==e.status&&p.default.dispatch({type:b.ApiError,payload:e})})}Object.defineProperty(t,"__esModule",{value:!0});var u=n(57),i=r(u),l=n(0),s=r(l),d=n(27),c=r(d),f=n(19),p=r(f),m=n(78),h=r(m),_=n(119),y=r(_),v=n(12),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(v),g=n(118),O={wireup:function(){if(window.localStorage.getItem("veggy")){var e=JSON.parse(window.localStorage.getItem("veggy"));h.default.sendCommand("login:"+e.username),Promise.all([(0,g.getUsers)(),(0,g.getTimers)(e),(0,g.getTags)(e),o(e)]).then(function(){return p.default.dispatch({type:b.Init,payload:e})})}else p.default.dispatch({type:b.NeedLogin,payload:{}})}};t.default=O,e.exports=t.default},333:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(44),o=r(a),u=n(122),i=r(u),l=n(27),s=r(l),d=function(e){return e.selected},c=function(e){return e.timer_id},f={startPomodoro:function(e,t,n){var r=o.default.pipe(o.default.filter(d),o.default.map(c))(t),a={command:"StartPomodoro",duration:s.default.duration,timer_id:e,description:n};r.length>0&&(a.command="StartSharedPomodoro",a.shared_with=r),(0,i.default)(a)},squash:function(e,t,n){var r={command:"SquashPomodoro",timer_id:e,pomodoro_id:t};n&&(r.command="SquashSharedPomodoro"),(0,i.default)(r)}};t.default=f,e.exports=t.default},334:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(19),o=r(a),u=n(122),i=r(u),l=n(78),s=r(l),d=n(12),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(d),f={toggleSelectedUsers:function(e){o.default.dispatch({type:c.SelectedUsersChanged,payload:e})},login:function(e){(0,i.default)({command:"Login",username:e},function(){o.default.dispatch({type:c.WaitForLogin})}),s.default.sendCommand("login:"+e)}};t.default=f,e.exports=t.default},335:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),a=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(e){var t=e.startDisabled,n=e.squashDisabled,r=e.onStart,o=e.onSquash;return a.default.createElement("div",{className:"column"},a.default.createElement("div",{className:"box"},a.default.createElement("div",{className:"block"},a.default.createElement("button",{id:"startButton",disabled:t,onClick:r,className:"button is-primary is-large"},"Start"),a.default.createElement("button",{id:"squashButton",disabled:n,onClick:o,className:"button is-danger is-large",style:{marginLeft:"10px"}},"Squash"))))};o.defaultProps={startDisabled:!1,squashDisabled:!0,onStart:function(){},onSquash:function(){}},t.default=o,e.exports=t.default},336:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(11),s=r(l),d=n(116),c=r(d),f=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleOkClick=n.handleOkClick.bind(n),n}return u(t,e),i(t,[{key:"handleOkClick",value:function(){var e=this.refs.description.value;this.props.onStart(e)}},{key:"render",value:function(){return s.default.createElement(c.default,{isActive:this.props.isActive,okBtnLabel:"Start",cancelBtnLabel:"Cancel",onOkClick:this.handleOkClick,onCancelClick:this.props.onCancel},s.default.createElement("div",{className:"field"},s.default.createElement("label",{className:"label"},"Pomodoro description"),s.default.createElement("p",{className:"control"},s.default.createElement("textarea",{ref:"description",className:"textarea",placeholder:"What are you doing?"}))))}}]),t}(l.Component);t.default=f,e.exports=t.default},337:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),a=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(e){var t=e.time,n=e.is_shared;return a.default.createElement("div",{className:"column is-three-quarters"},a.default.createElement("div",{className:"box has-text-centered"},a.default.createElement("h1",{id:"time",className:"title is-1"},t,n&&a.default.createElement("i",{className:"shared-icon fa fa-share-alt"}))))};o.defaultProps={time:"25:00"},t.default=o,e.exports=t.default},338:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(11),s=r(l),d=n(116),c=r(d),f=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleLoginClick=n.handleLoginClick.bind(n),n}return u(t,e),i(t,[{key:"handleLoginClick",value:function(){var e=this.refs.username.value;this.props.onLogin(e)}},{key:"render",value:function(){return s.default.createElement(c.default,{isActive:this.props.isActive,title:"Please login...",onOkClick:this.handleLoginClick,okBtnLabel:"Login",waiting:this.props.waiting},s.default.createElement("div",{className:"field"},s.default.createElement("label",{className:"label"},"Username"),s.default.createElement("p",{className:"control"},s.default.createElement("input",{className:"input",type:"text",ref:"username"}))))}}]),t}(s.default.Component);t.default=f,e.exports=t.default},339:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(11),s=r(l),d=n(328),c=r(d),f=n(337),p=r(f),m=n(335),h=r(m),_=n(341),y=r(_),v=n(342),b=r(v),g=n(340),O=r(g),P=n(333),E=r(P),w=n(332),j=r(w),M=n(334),S=r(M),k=n(329),C=r(k),N=n(338),T=r(N),L=n(336),q=r(L),x=n(19),U=r(x),A=n(12),R=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(A),D=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleLogin=n.handleLogin.bind(n),n.handleCancelStart=n.handleCancelStart.bind(n),n.handleStart=n.handleStart.bind(n),n.handleStartRequest=n.handleStartRequest.bind(n),n.handleSquash=n.handleSquash.bind(n),n.handleToggleUser=n.handleToggleUser.bind(n),n}return u(t,e),i(t,[{key:"componentWillMount",value:function(){j.default.wireup()}},{key:"handleStart",value:function(e){E.default.startPomodoro(this.props.timer_id,this.props.users,e)}},{key:"handleStartRequest",value:function(){U.default.dispatch({type:R.StartRequested,payload:{}})}},{key:"handleSquash",value:function(){E.default.squash(this.props.timer_id,this.props.pomodoro_id,this.props.is_shared)}},{key:"handleToggleUser",value:function(e){S.default.toggleSelectedUsers(e)}},{key:"handleLogin",value:function(e){S.default.login(e)}},{key:"handleCancelStart",value:function(){U.default.dispatch({type:R.StartCanceled,payload:{}})}},{key:"render",value:function(){return s.default.createElement("div",null,s.default.createElement(q.default,{isActive:this.props.need_description,onStart:this.handleStart,onCancel:this.handleCancelStart}),s.default.createElement(T.default,{isActive:this.props.need_login,onLogin:this.handleLogin,waiting:this.props.waiting_for_login}),s.default.createElement(C.default,{username:this.props.username}),s.default.createElement("div",{className:"container",style:{marginTop:"20px"}},s.default.createElement("div",{className:"columns"},s.default.createElement(p.default,{time:this.props.time,is_shared:this.props.is_shared}),s.default.createElement(h.default,{startDisabled:this.props.start_disabled,squashDisabled:this.props.squash_disabled,onStart:this.handleStartRequest,onSquash:this.handleSquash})),s.default.createElement("div",{className:"columns"},s.default.createElement(y.default,{timers:this.props.timers}),s.default.createElement(O.default,{tags:this.props.tags}),s.default.createElement(b.default,{users:this.props.users,onToggleUser:this.handleToggleUser})),s.default.createElement("div",{className:"columns"},s.default.createElement(c.default,{message:this.props.message,type:this.props.message_type}))))}}]),t}(s.default.Component);t.default=D,e.exports=t.default},340:function(e,t,n){"use strict";function r(e){var t=e.tags,n=t.map(function(e){return o.default.createElement("tr",{key:e.tag},o.default.createElement("td",null,e.tag),o.default.createElement("td",null,e.pomodori))});return o.default.createElement("div",{className:"column is-one-third"},o.default.createElement("table",{className:"table"},o.default.createElement("thead",null,o.default.createElement("tr",null,o.default.createElement("th",null,"Tag"),o.default.createElement("th",null,"Pomodori"))),o.default.createElement("tbody",null,n)))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),o=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default=r,e.exports=t.default},341:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.shared_with.map(function(e){return l.default.createElement("span",{className:"tag is-info",key:e},""+e)});return l.default.createElement("tr",null,l.default.createElement("td",null,(0,d.default)(e.startedAt).format("DD-MM-YYYY hh:mm:ss")),l.default.createElement("td",null,e.description),l.default.createElement("td",null,t),l.default.createElement("td",{className:"centered"},o(e.status)))}function o(e){return l.default.createElement("span",{className:"icon"},l.default.createElement("i",{className:f[e]}))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(11),l=r(i),s=n(0),d=r(s),c=function(e){var t=e.timers,n=t.map(function(e){return l.default.createElement(a,u({key:e.id},e))});return l.default.createElement("div",{className:"column is-one-third"},l.default.createElement("table",{className:"table"},l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",null,"Started at"),l.default.createElement("th",null,"Description"),l.default.createElement("th",null,"Shared"),l.default.createElement("th",{className:"centered"},"Status"))),l.default.createElement("tbody",null,n)))};c.defaultProps={timers:[]};var f={started:"pi-pomodoro-ticking",completed:"pi-pomodoro-done",squashed:"pi-pomodoro-squashed"};t.default=c,e.exports=t.default},342:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),a=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(e){var t=e.users,n=e.onToggleUser,r=t.map(function(e){return a.default.createElement(u,{key:e.user_id,onSelect:function(){return n(e.user_id)},selected:e.selected,username:e.username})});return a.default.createElement("div",{className:"column"},a.default.createElement("nav",{className:"panel",style:{backgroundColor:"#FFFFFF"}},a.default.createElement("p",{className:"panel-heading"},"Users"),r))},u=function(e){var t=e.username,n=e.selected,r=e.onSelect,o=n?"selectedRow":"";return a.default.createElement("a",{className:o+" panel-block",href:"#",onClick:r},a.default.createElement("span",{className:"panel-icon"},a.default.createElement("i",{className:"fa fa-user"})),t)};t.default=o,e.exports=t.default},343:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(32),u=function(e){return e&&e.__esModule?e:{default:e}}(o),i=n(12),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i);t.default=(0,u.default)((a={},r(a,l.PomodoroStarted,function(){return{start_disabled:!0,squash_disabled:!1}}),r(a,l.ResumeTimer,function(){return{start_disabled:!0,squash_disabled:!1}}),r(a,l.PomodoroCompleted,function(){return{start_disabled:!1,squash_disabled:!0}}),r(a,l.PomodoroSquashed,function(){return{start_disabled:!1,squash_disabled:!0}}),r(a,l.PomodoroVoided,function(){return{start_disabled:!1,squash_disabled:!0}}),a)),e.exports=t.default},344:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o,u=n(32),i=r(u),l=n(27),s=r(l),d=n(120),c=r(d),f=n(12),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f);t.default=(0,i.default)((o={},a(o,p.PomodoroStarted,function(e,t){return{timer_id:t.payload.timer_id,pomodoro_id:t.payload.pomodoro_id,is_shared:t.payload.shared_with&&t.payload.shared_with.length>0}}),a(o,p.PomodoroCompleted,function(){return{time:(0,c.default)(s.default.duration)}}),a(o,p.PomodoroSquashed,function(){return{time:(0,c.default)(s.default.duration)}}),a(o,p.PomodoroVoided,function(){return{time:(0,c.default)(s.default.duration)}}),a(o,p.UpdateTimer,function(e,t){return{time:(0,c.default)(t.payload.time)}}),a(o,p.ResumeTimer,function(e,t){return{time:(0,c.default)(t.payload.time),timer_id:t.payload.timer_id,pomodoro_id:t.payload.pomodoro_id}}),o)),e.exports=t.default},345:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=[n(346),n(343),n(344),n(347),n(350),n(349),n(348)];t.default=r,e.exports=t.default},346:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(32),u=function(e){return e&&e.__esModule?e:{default:e}}(o),i=n(12),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i);t.default=(0,u.default)((a={},r(a,l.Init,function(e,t){return{user_id:t.payload.user_id,username:t.payload.username,timer_id:t.payload.timer_id}}),r(a,l.NeedLogin,function(){return{need_login:!0}}),r(a,l.StartRequested,function(){return{need_description:!0}}),r(a,l.StartCanceled,function(){return{need_description:!1}}),r(a,l.PomodoroStarted,function(){return{need_description:!1}}),a)),e.exports=t.default},347:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(32),u=function(e){return e&&e.__esModule?e:{default:e}}(o),i=n(12),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i);t.default=(0,u.default)((a={},r(a,l.ApiError,function(e,t){return{message:"There was an error calling the API: "+t.payload,message_type:"error"}}),r(a,l.PomodoroCompleted,function(){return{message:"Good job! Your pomodoro is completed",message_type:"info"}}),r(a,l.PomodoroSquashed,function(){return{message:"Ouch! Your pomodoro has been interrupted",message_type:"warn"}}),r(a,l.PomodoroVoided,function(){return{message:"There was some problem with your pomorodo. Probably some other user squashed it.",message_type:"warn"}}),r(a,l.CommandFailed,function(e,t){return{message:"There was an error: "+t.payload.why,message_type:"error"}}),r(a,l.DismissMessage,function(){return{message:"",message_type:"none"}}),a)),e.exports=t.default},348:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),u=n(32),i=r(u),l=n(12),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l);t.default=(0,i.default)(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},s.TagsLoaded,function(e,t){return{tags:t.payload.map(function(e){return{tag:e.tag,pomodori:e.pomodori,duration:o.default.duration(e.duration).humanize()}})}})),e.exports=t.default},349:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var u,i=n(44),l=r(i),s=n(32),d=r(s),c=n(12),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),p=function(e,t){return l.default.compose(l.default.map(function(e){return e.username}),l.default.filter(function(e){return l.default.contains(e.timer_id,t)}))(e)};t.default=(0,d.default)((u={},a(u,f.TimersLoaded,function(e,t){return{timers:t.payload.map(function(t){return{id:t.pomodoro_id,status:t.status,startedAt:t.started_at,shared_with:p(e.users||[],t.shared_with),description:t.description}})}}),a(u,f.PomodoroStarted,function(e,t){return{timers:[].concat(o(e.timers),[{id:t.payload.pomodoro_id,description:t.payload.description,status:"started",startedAt:new Date,shared_with:p(e.users,t.payload.shared_with)}])}}),a(u,f.PomodoroCompleted,function(e,t){return{timers:e.timers.map(function(e){return e.id===t.payload.pomodoro_id?Object.assign({},e,{status:"completed"}):e})}}),a(u,f.PomodoroSquashed,function(e,t){return{timers:e.timers.map(function(e){return e.id===t.payload.pomodoro_id?Object.assign({},e,{status:"squashed"}):e})}}),a(u,f.PomodoroVoided,function(e,t){return{timers:e.timers.filter(function(e){return e.id!==t.payload.pomodoro_id})}}),u)),e.exports=t.default},350:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o,u=n(32),i=r(u),l=n(44),s=r(l),d=n(12),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(d),f=s.default.curry(function(e,t){return t.user_id===e}),p=s.default.map(function(e){return{user_id:e.user_id,username:e.username,timer_id:e.timer_id}});t.default=(0,i.default)((o={},a(o,c.UsersLoaded,function(e,t){return{users:s.default.compose(p,s.default.reject(f(e.user_id)))(t.payload)}}),a(o,c.SelectedUsersChanged,function(e,t){return{users:e.users.map(function(e){return e.user_id===t.payload?Object.assign({},e,{selected:!e.selected}):e})}}),a(o,c.LoggedIn,function(e,t){return{need_login:!1,username:t.payload.username}}),a(o,c.WaitForLogin,function(){return{waiting_for_login:!0}}),o)),e.exports=t.default},351:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){d.default.dispatch((0,l.default)({event:m.PomodoroStarted,timer_id:e.timer_id,pomodoro_id:e.pomodoro_id,shared_with:[]})),h=setTimeout(function(){d.default.dispatch((0,l.default)({event:m.PomodoroCompleted,timer_id:e.timer_id,pomodoro_id:e.pomodoro_id,shared_with:[]})),h=null},f.default.duration)}function o(e){clearTimeout(h),h=null,d.default.dispatch((0,l.default)({event:m.PomodoroSquashed,timer_id:e.timer_id,pomodoro_id:e.pomodoro_id,shared_with:[]}))}function u(){return null!==h}Object.defineProperty(t,"__esModule",{value:!0}),t.startOffLinePomodoro=a,t.squashOffLinePomodoro=o,t.isTicking=u;var i=n(121),l=r(i),s=n(19),d=r(s),c=n(27),f=r(c),p=n(12),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(p),h=null},352:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t,n){return e.reduce(function(e,t){var r=t.project(e);return Object.assign({},e,t(r,n))},t)}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){function l(e){a(this,l);var t=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e));return t.state={innerState:n},t}return u(l,r),d(l,[{key:"componentWillMount",value:function(){var e=this;this.regId=m.default.register(function(n){var r=i(t,e.state.innerState,n);e.setState({innerState:r})})}},{key:"componentWillUnmount",value:function(){m.default.unregister(this.regId)}},{key:"render",value:function(){return f.default.createElement(e,s({},this.state.innerState,this.props))}}]),l}(f.default.Component)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(11),f=r(c),p=n(19),m=r(p);t.default=l,e.exports=t.default},78:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){m=new WebSocket(d.default.wsHost),m.onopen=function(){p=setInterval(function(){return m.send("ping")},5e3)},m.onerror=function(e){console.log("websocket error",e)},m.onmessage=function(e){var t=JSON.parse(e.data);"pong"!==t.message&&"ok"!==t.message&&f.default.dispatch((0,l.default)(t))}}function o(){clearInterval(p),m.close()}function u(e){1!==m.readyState?setTimeout(function(){return u(e)},1e3):m.send(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(121),l=r(i),s=n(27),d=r(s),c=n(19),f=r(c),p=null,m=null;t.default={connect:a,disconnect:o,sendCommand:u},e.exports=t.default}},[327]);